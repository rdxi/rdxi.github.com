<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title>Squid</title>

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/style.css" media="all">

</head>
<body>
	<div class="modal-overlay"></div>
		<div class="modal-add">
		<div class="modal-wrap">
			<ul class="modal-add-tabs">
				<li class="add-url tab-active"><a href="#">add from web</a></li>
				<li class="add-upload"><a href="#">add local file</a></li>
				<form action="" class="form-url">
					<input type="text" placeholder="Paste torrent URL" class="input-url"><input type="submit" class="input-btn" value="go">
				</form>
				<form action="" class="form-upload">
					<input type="text" placeholder="Choose a file to upload" class="input-url"><input type="submit" class="input-btn" value="go">
				</form>
			</ul>
		</div>
	</div>
	<div class="modal">
		<a class="scroll-arr-l"></a>
		<a class="scroll-arr-r"></a>
		<div class="modal-wrap blocks">
			<section class="info-block">
				<div class="info-name">john@doe.com</div>
				<div class="info-title">Squid</div>
				<div class="info-message">1.9 GB available <br /> of 2.0 GB weekly</div>
				<a href="#" class="info-button">+ Add more</a>
			</section>
			<section class="info-block">
				<div class="info-name">xxJohnnyxx18</div>
				<div class="info-title">Dropbox</div>
				<div class="info-message">40.00 GB available <br /> of 50.00 GB total</div>
			</section>
			<section class="info-block">
				<ul class="info-menu">
					<li><a href="#">Help</a></li>
					<li><a href="#">Terms &amp; conditions</a></li>
					<li><a href="#">Privacy</a></li>
					<li><a href="#">Pricing</a></li>
				</ul>
				<ul class="info-news">
					<li>
						<a href="#">
							19.08.12 <br />
							Great news everyone!
						</a>
					</li>
					<li>
						<a href="#">
							09.08.12 <br />
							Great news everyone!
						</a>
					</li>
				</ul>
			</section>
		</div>
	</div>
	<section class="controls">
		<nav>
			<ul>
				<li class="select-all"><a href="#"></a></li>
				<li class="start"><a href="#"><span>Start download</span></a></li>
				<li class="pause"><a href="#"><span>Pause download</span></a></li>
				<li class="cancel"><a href="#"><span>Cancel download</span></a></li>
				<li class="settings"><a href="#"><span>Account information</span></a></li>
				<li class="add"><a href="#"><span>Add torrent</span></a></li>
			</ul>
		</nav>
	</section>
	<section class="content">
		<ul class="dl-list">
			<script id="list-item" type=test/template>
			<li class="{{listatus}}">
				<input type="checkbox" id="item-{{inputid}}" class="checkbox">
				<label class="li-label" for="item-{{inputid}}"></label>
				<div class="info-wrap">
					<section class="title">{{title}}</section>
					<section class="size">{{size}}</section>
					<section class="progress {{state}}">
						<div class="progress-total {{ptsize}}"></div>
					</section>
					<section class="status">{{status}}</section>
				</div>
				<a class="file-button" title="Show contents"></a>
				<section class="file-list">
					<table>
						<tr>
							<td>The Peppers Cracklings.rar</td>
							<td>720 MB</td>
						</tr>
						<tr>
							<td>Torrent downloaded from AhaShare.com.txt</td>
							<td>2 MB</td>
						</tr>
						<tr>
							<td>Torrent downloaded from Demonoid.txt</td>
							<td>1.5 MB</td>
						</tr>
						<tr>
							<td>tracked_by_h33t_com.txt</td>
							<td>0.5 MB</td>
						</tr>
					</table>
				</section>
			</li>
			</script>
		</ul>
	</section>


<script type="text/javascript">

$(function() {
	var content = [
		{
			title: 'How to Cook Everything The Basics: All You Need to Make Great Food -- With 1,000 Photos (2012) -epub',
			size: '0 / 97.51 MB',
			status: 'ready to download',
			state: 'halt',
			listatus: 'status-ready',
			ptsize: 'progress-total-0'

		},

		{
			title: 'The Classic 1000 Seafood Recipes',
			size: '0 / 3.30 MB',
			status: 'ready to download',
			state: 'halt',
			listatus: 'status-ready',
			ptsize: 'progress-total-0'
		},

		{
			title: 'The_Peppers__Cracklings__and_Knots_of_W',
			size: '181 / 724 MB',
			status: 'downloading',
			state: 'running',
			listatus: 'status-downloading',
			ptsize: 'progress-total-33'

		},

		{
			title: 'The Mozza Cookbook: Recipes from Los ',
			size: '31.69 / 31.69 MB',
			status: 'finished',
			state: 'done',
			listatus: 'status-finished',
			ptsize: 'progress-total-100'
		},

		{
			title: 'Jimbos Super Cookbook Collection',
			size: '0.99 / 1.78 GB',
			status: 'downloading',
			state: 'running',
			listatus: 'status-downloading',
			ptsize: 'progress-total-66'
		}
	];

	var template = $.trim( $('#list-item').html() );
	var frag = '';

	$.each( content, function(index, obj)  {
		frag += template.replace( /{{title}}/ig, obj.title)
						   .replace( /{{size}}/ig, obj.size)
						   .replace( /{{status}}/ig, obj.status)
						   .replace( /{{state}}/ig, obj.state)
						   .replace( /{{listatus}}/ig, obj.listatus)
						   .replace( /{{ptsize}}/ig, obj.ptsize)
						   .replace( /{{inputid}}/ig, index);

	});

	$('ul.dl-list').append(frag);

	$('.file-button').click(function() {
		$(this).next().slideToggle(200);
	});

	// fake checkbox
	$(".checkbox").each(function() {
		$(this).hide();

		var $image = $("<img src='img/icon-select-all.png' class='check-img'/>").insertAfter(this);

		$image.click(function() {
		    var $checkbox = $(this).prev(".checkbox");
		    $checkbox.prop('checked', !$checkbox.prop('checked'));

		    if ($checkbox.prop("checked")) {
		        $image.attr("src", "img/icon-checkbox.png");
		    } else {
		        $image.attr("src", "img/icon-select-all.png");
		    }
		})
	});

	// select all
  $('.select-all').toggle(
      function() {
          $('.checkbox').prop('checked', true);
          $('.check-img').attr('src', 'img/icon-checkbox.png');
      },
      function() {
          $('.checkbox').prop('checked', false);
          $('.check-img').attr('src', 'img/icon-select-all.png');
      }
  );
});
</script>

<!-- modal -->
<script type="text/javascript">

	$(document).ready(function(){
        $("li.settings").click(function(){
            $(".modal-overlay").toggleClass("shown");
            $(".modal").toggleClass("shown");
            miniWidth();
            // arws();
        });

        $(".modal-overlay, .modal-close").click(function(){
            $(".modal-overlay").removeClass("shown");
            $(".modal").removeClass("shown");
        });
    });

	$(document).ready(function(){
        $("li.add").click(function(){
            $(".modal-overlay").toggleClass("shown");
            $(".modal-add").toggleClass("shown");
        });

        $(".modal-overlay, .modal-close").click(function(){
            $(".modal-overlay").removeClass("shown");
            $(".modal-add").removeClass("shown");
        });
    });

/* mobile width */

function miniWidth () {
	var winWidth = $(window).width();
	console.log(winWidth);
	if (winWidth < 768) {
		console.log('mini-test default');
		w = $('.modal').width();
		w = (w - 200) / 2;
		console.log(w);
		$('.info-block').css({
			'margin-left': w,
			'margin-right': w
		});
	} else {
		console.log('mini-test else');
		$('.info-block').css({
			'margin-left': 65,
			'margin-right': 65
		});
	}

};
var cc = 0;
$(window).resize(function(){
		miniWidth();
		$('.blocks').stop().animate({'left': 0}, 200);
		cc = 0;
	});


/* mobile arrows */
(function arws() {
	var m = $('.blocks'),
	 	l = $('a.scroll-arr-l'),
	 	r = $('a.scroll-arr-r'),
	 	nw = $('.modal').width();

	$(r).click(function () {
		if (cc < 2) {
			nw = $('.modal').width(),
			$(m).animate({'left': '-=' + nw}, 200);
			cc++;
			console.log (cc);
			console.log (nw);

		} else {
			nw = $('.modal').width(),
			$(m).animate({'left': 0}, 200);
			cc = 0;
			console.log (cc);
		};

	});

	$(l).click(function () {
		if (cc >= 1) {
			nw = $('.modal').width(),
			$(m).animate({'left': '+=' + nw}, 200);
			cc--;
			console.log (cc);
		} else {
			nw = $('.modal').width(),
			$(m).animate({'left': '-=' + nw*2}, 200);
			cc = 2;
		};
	});

})();


</script>

<!-- add file tabs -->
<script type="text/javascript">

(function () {
	var addUrl = $('.add-url'),
		addUpload = $('.add-upload'),
		x = addUrl.add(addUpload);

	$(addUrl).click(function () {
		$(x).removeClass('tab-active');
		$(this).addClass('tab-active');
		$('.form-url').show();
		$('.form-upload').hide();
	})

	$(addUpload).click(function () {
		$(x).removeClass('tab-active');
		$(this).addClass('tab-active');
		$('.form-upload').show();
		$('.form-url').hide();
	})

	})();


</script>

<!-- controls -->
<script type="text/javascript">

(function () {

	$('nav li.start').click(function () {

		console.log('clicked');
		var values = $('input:checked').parent().map(function () {
			return this;
		}).get();


		$(values).removeClass('status-ready').addClass('status-downloading');
		$('.status-downloading:not(.status-finished)')
								.find('.status')
								.html('downloading')
								.end()
								.find('.progress')
								.removeClass('halt');
	});


})();


(function () {

	$('nav li.cancel').click(function () {
		console.log('cancel clicked');
		var values = $('input:checked').parent().map(function () {
			return this;
		}).get();


		$(values).removeClass('status-downloading').addClass('status-ready');

		$('.status-ready:not(.status-finished)')
								.find('.status')
								.html('ready to download')
								.end()
								.find('.progress')
								.addClass('halt');

	});


})();


(function () {

	$('nav li.pause').click(function () {
		console.log('clicked');
		var values = $('input:checked').parent().map(function () {
			return this;
		}).get();


		$(values).removeClass('status-downloading').addClass('status-ready');

		$('.status-ready:not(.status-finished)')
								.find('.status')
								.html('ready to download')
								.end()
								.find('.progress')
								.addClass('halt');


	});


})();
</script>
</body>
</html>